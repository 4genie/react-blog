(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,n,t){},36:function(e,n,t){"use strict";t.r(n);var c,i,r,a,o,s,j=t(0),u=t(20),b=t.n(u),d=t(4),l=t(2),p=t(3),x=(t(28),t(10)),h=t(5),f="token",O=function(e){localStorage.setItem(f,e)},g=function(){return localStorage.getItem(f)},m="https://student-json-api.lidemy.me",v=function(e,n){return fetch("".concat(m,"/posts?_page=").concat(e,"&_limit=").concat(n,"&_sort=createdAt&_order=desc")).then((function(e){return e.json()}))},y=function(){var e=g();return fetch("".concat(m,"/me"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))},w=Object(j.createContext)(null),S=t(1),k=p.a.div(c||(c=Object(l.a)(["\n  color: red;\n"]))),z=p.a.div(i||(i=Object(l.a)(["\n  margin-top: 20px;\n  text-align: center;\n  font-size: 36px;\n  text-weight: 600;\n"]))),C=p.a.form(r||(r=Object(l.a)(["\n  width: 30%;\n  min-width: 300px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  margin: 40px auto;\n  padding: 40px;\n  justify-content: space-between;\n  min-height: 110px;\n  border: 1.2px solid rgba(200, 200, 200, 0.5);\n  box-shadow: 1px 1px 3px #fbfbfb;\n  border-radius: 5px;\n  font-family: '\u5fae\u8edf\u6b63\u9ed1\u9ad4';\n"])));function N(){var e=Object(j.useContext)(w).setUser,n=Object(j.useState)(""),t=Object(d.a)(n,2),c=t[0],i=t[1],r=Object(j.useState)(""),a=Object(d.a)(r,2),o=a[0],s=a[1],u=Object(j.useState)(""),b=Object(d.a)(u,2),l=b[0],p=b[1],x=Object(j.useRef)(!1),f=Object(h.f)();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(z,{children:"Log In"}),Object(S.jsxs)(C,{onSubmit:function(n){n.preventDefault(),p(null),x.current||(x.current=!0,function(e,n){return fetch("".concat(m,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,password:n})}).then((function(e){return e.json()}))}(c,o).then((function(n){if(0===n.ok)return p(n.message);O(n.token),y().then((function(n){if(1!==n.ok)return O(null),p(n.toString());e(n.data),f.push("/"),x.current=!1}))})))},children:[Object(S.jsxs)("div",{children:["username :"," ",Object(S.jsx)("input",{className:"form-input",value:c,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{children:["password :"," ",Object(S.jsx)("input",{className:"form-input",type:"password",value:o,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(S.jsx)("button",{type:"submit",className:"form-btn",children:"Log In"}),l&&Object(S.jsx)(k,{children:l})]})]})}var L,B,P,q,D,E,U,I=p.a.div(a||(a=Object(l.a)(["\n  color: red;\n"]))),T=p.a.div(o||(o=Object(l.a)(["\n  margin-top: 20px;\n  text-align: center;\n  font-size: 36px;\n  text-weight: 600;\n"]))),$=p.a.form(s||(s=Object(l.a)(["\n  width: 30%;\n  min-width: 300px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  margin: 40px auto;\n  padding: 40px;\n  justify-content: space-between;\n  min-height: 110px;\n  border: 1.2px solid rgba(200, 200, 200, 0.5);\n  box-shadow: 1px 1px 3px #fbfbfb;\n  border-radius: 5px;\n  font-family: '\u5fae\u8edf\u6b63\u9ed1\u9ad4';\n"])));function _(){var e=Object(j.useContext)(w).setUser,n=Object(j.useState)(""),t=Object(d.a)(n,2),c=t[0],i=t[1],r=Object(j.useState)(""),a=Object(d.a)(r,2),o=a[0],s=a[1],u=Object(j.useState)(""),b=Object(d.a)(u,2),l=b[0],p=b[1],x=Object(j.useState)(""),f=Object(d.a)(x,2),g=f[0],v=f[1],k=Object(j.useRef)(!1),z=Object(h.f)();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(T,{children:"Sign Up"}),Object(S.jsxs)($,{onSubmit:function(n){n.preventDefault(),v(null),k.current||(k.current=!0,function(e,n,t){return fetch("".concat(m,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,nickname:n,password:t})}).then((function(e){return e.json()}))}(c,l,o).then((function(n){if(0===n.ok)return v(n.message);O(n.token),y().then((function(n){if(1!==n.ok)return O(null),v(n.toString());e(n.data),z.push("/"),k.current=!1}))})))},children:[Object(S.jsxs)("div",{children:["username:"," ",Object(S.jsx)("input",{className:"form-input",value:c,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{children:["nickname:"," ",Object(S.jsx)("input",{className:"form-input",value:l,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{children:["password:"," ",Object(S.jsx)("input",{className:"form-input",type:"password",value:o,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(S.jsx)("button",{type:"submit",className:"form-btn",children:"Sign Up"}),g&&Object(S.jsx)(I,{children:g})]})]})}var A,J,R,F,M,G,H,K,Q=p.a.div(L||(L=Object(l.a)(["\n  width: 75%;\n  margin: 0 auto;\n"]))),V=p.a.div(B||(B=Object(l.a)(["\n  border-bottom: solid 1px rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    background-color: rgba(0, 12, 34, 0.07);\n  }\n"]))),W=Object(p.a)(x.b)(P||(P=Object(l.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]))),X=p.a.div(q||(q=Object(l.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]))),Y=p.a.div(D||(D=Object(l.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]))),Z=p.a.li(E||(E=Object(l.a)(["\n  width: 45px;\n  height: 45px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 18px;\n  cursor: pointer;\n  outline: transparent;\n  border: solid 1px rgba(0, 12, 34, 0.1);\n  margin-top: 20px;\n\n  &:hover {\n    background-color: rgba(0, 12, 34, 0.07);\n  }\n"]))),ee=p.a.div(U||(U=Object(l.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: center;\n  align-item: center;\n  font-size: 28px;\n"])));function ne(e){var n=e.post;return Object(S.jsxs)(V,{children:[Object(S.jsx)(W,{to:"/posts/".concat(n.id),children:n.title}),Object(S.jsx)(X,{children:new Date(n.createdAt).toLocaleDateString()})]})}function te(){var e=Object(j.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],i=Object(j.useState)([]),r=Object(d.a)(i,2),a=r[0],o=r[1],s=Object(j.useState)(!1),u=Object(d.a)(s,2),b=u[0],l=u[1];Object(j.useEffect)((function(){l(!0),fetch("".concat(m,"/posts?_sort=createdAt&_order=desc")).then((function(e){return e.json()})).then((function(e){var n=Math.ceil(e.length/5);o(function(e){for(var n=[],t=1;t<=e;t++)n.push(t);return n}(n)),v(1,5).then((function(e){return c(e)})),l(!1)})).catch((function(e){l(!1)}))}),[]);return Object(S.jsxs)(Q,{children:[b&&Object(S.jsx)(ee,{children:"\u6b63\u5728\u8f09\u5165\u4e2d..."}),t.map((function(e){return Object(S.jsx)(ne,{post:e},e.id)})),Object(S.jsx)(Y,{children:t.length>0&&a.map((function(e){return Object(S.jsx)(Z,{onClick:function(){return function(e){v(e,5).then((function(e){return c(e)}))}(e)},children:e},e)}))})]})}var ce,ie,re,ae=p.a.div(A||(A=Object(l.a)(["\n  width: 75%;\n  margin: 0 auto;\n"]))),oe=p.a.div(J||(J=Object(l.a)(["\n  padding: 16px;\n  margin: 8px auto;\n  max-width: 960px;\n"]))),se=p.a.div(R||(R=Object(l.a)(["\n  padding: 16px 0;\n"]))),je=p.a.div(F||(F=Object(l.a)(["\n  font-size: 28px;\n  font-weight: 700;\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),ue=p.a.div(M||(M=Object(l.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  margin-top: 10px;\n"]))),be=p.a.div(G||(G=Object(l.a)(["\n  text-align: justify;\n  font-size: 20px;\n  letter-spacing: 3px;\n  line-height: 1.5;\n  white-space: pre-wrap;\n"]))),de=p.a.button(H||(H=Object(l.a)(["\n  border: none;\n  height: 35px;\n  width: 100px;\n  border-radius: 5px;\n  cursor: pointer;\n  margin-left: 20px;\n\n  &:hover {\n    background-color: rgba(0, 12, 34, 0.1);\n  }\n"]))),le=p.a.div(K||(K=Object(l.a)(["\n  margin-top: 30px;\n  display: flex;\n  justify-content: center;\n  align-item: center;\n  font-size: 28px;\n"])));function pe(){var e=Object(j.useState)(null),n=Object(d.a)(e,2),t=n[0],c=n[1],i=Object(j.useState)(!1),r=Object(d.a)(i,2),a=r[0],o=r[1],s=Object(h.f)(),u=Object(h.h)().id;Object(j.useEffect)((function(){o(!0),function(e){return fetch("".concat(m,"/posts?id=").concat(e)).then((function(e){return e.json()}))}(u).then((function(e){o(!1),c(e[0])})).catch((function(e){o(!1)}))}),[u]);return Object(S.jsxs)(ae,{children:[a&&Object(S.jsx)(le,{children:"\u6b63\u5728\u8f09\u5165\u4e2d..."}),Object(S.jsxs)(oe,{children:[Object(S.jsxs)(se,{children:[Object(S.jsxs)(je,{children:[t&&t.title,!a&&Object(S.jsx)(de,{onClick:function(){(function(e){var n=g();return fetch("".concat(m,"/posts/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(n),"content-type":"application/json"}}).then((function(e){return e.json()}))})(u).then((function(){s.push("/")}))},children:"\u522a\u9664\u6b64\u6587"})]}),Object(S.jsx)(ue,{children:t&&new Date(t.createdAt).toLocaleDateString()})]}),Object(S.jsx)(be,{children:t&&t.body})]})]})}var xe,he,fe,Oe=p.a.div(ce||(ce=Object(l.a)(["\n  width: 80%;\n  margin: 0 auto;\n  text-align: center;\n"]))),ge=p.a.div(ie||(ie=Object(l.a)(["\n  margin: 40px 0;\n  font-size: 36px;\n"]))),me=p.a.div(re||(re=Object(l.a)(["\n  font-size: 24px;\n  padding: 30px;\n"])));function ve(){return Object(S.jsxs)(Oe,{children:[Object(S.jsx)(ge,{children:"This Blog"}),Object(S.jsx)(me,{children:"Build up with React , and only for practicing use"})]})}var ye,we,Se,ke,ze,Ce=p.a.div(xe||(xe=Object(l.a)(["\n  color: red;\n"]))),Ne=p.a.div(he||(he=Object(l.a)(["\n  margin-top: 20px;\n  text-align: center;\n  font-size: 36px;\n  text-weight: 600;\n"]))),Le=p.a.form(fe||(fe=Object(l.a)(["\n  width: 50%;\n  min-width: 40px;\n  display: flex;\n  flex-direction: column;\n  margin: 40px auto;\n  padding: 40px;\n  min-height: 360px;\n  border: 1.2px solid rgba(200, 200, 200, 0.5);\n  box-shadow: 1px 1px 3px #fbfbfb;\n  border-radius: 5px;\n  font-family: '\u5fae\u8edf\u6b63\u9ed1\u9ad4';\n"])));function Be(){var e=Object(j.useState)(""),n=Object(d.a)(e,2),t=n[0],c=n[1],i=Object(j.useState)(""),r=Object(d.a)(i,2),a=r[0],o=r[1],s=Object(j.useState)(""),u=Object(d.a)(s,2),b=u[0],l=u[1],p=Object(h.f)(),x=Object(j.useRef)(!1);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Ne,{children:"New Post"}),Object(S.jsxs)(Le,{onSubmit:function(e){l(null),x.current||(x.current=!0,function(e,n){var t=g();return fetch("".concat(m,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({title:e,body:n})}).then((function(e){return e.json()}))}(t,a).then((function(e){if(0===e.ok)return l(e.message);p.push("/"),x.current=!1})))},children:[Object(S.jsx)("div",{children:Object(S.jsx)("input",{className:"form-title",placeholder:"Title",value:t,onChange:function(e){return c(e.target.value)},required:!0})}),Object(S.jsx)("div",{children:Object(S.jsx)("textarea",{className:"form-textarea",placeholder:"Say something...",rows:"15",value:a,onChange:function(e){return o(e.target.value)},required:!0})}),Object(S.jsx)("button",{type:"submit",className:"form-btn",children:"Publish"}),b&&Object(S.jsx)(Ce,{children:b})]})]})}var Pe,qe=p.a.div(ye||(ye=Object(l.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: solid 1px rgba(0, 0, 0, 0.3);\n  padding: 0px 32px;\n  background: white;\n"]))),De=p.a.div(we||(we=Object(l.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]))),Ee=p.a.div(Se||(Se=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]))),Ue=Object(p.a)(x.b)(ke||(ke=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ",";\n"])),(function(e){return e.$active&&"background-color: rgba(0,0,0,0.1)"})),Ie=p.a.div(ze||(ze=Object(l.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"])),Ee);function Te(){var e=Object(h.g)(),n=Object(h.f)(),t=Object(j.useContext)(w),c=t.user,i=t.setUser,r=t.isLoadingGetMe;return Object(S.jsx)(qe,{children:!r&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(Ie,{children:[Object(S.jsx)(De,{children:"Blog"}),Object(S.jsxs)(Ee,{children:[Object(S.jsx)(Ue,{to:"/",$active:"/"===e.pathname,children:"Posts"}),c&&Object(S.jsx)(Ue,{to:"/new-post",$active:"/new-post"===e.pathname,children:"Publish"}),Object(S.jsx)(Ue,{to:"/about",$active:"/about"===e.pathname,children:"About"})]})]}),Object(S.jsxs)(Ee,{children:[!c&&Object(S.jsx)(Ue,{to:"/register",$active:"/register"===e.pathname,children:"Sign Up"}),!c&&Object(S.jsx)(Ue,{to:"/login",$active:"/login"===e.pathname,children:"Log In"}),c&&Object(S.jsx)(Ue,{to:"/login",onClick:function(){O(""),i(null),"/"!==e.pathname&&n.push("/")},children:"Log Out"})]})]})})}var $e,_e=p.a.div(Pe||(Pe=Object(l.a)(["\n  margin: 30px 0;\n  font-family: '\u5fae\u8edf\u6b63\u9ed1\u9ad4';\n  font-weight: 500;\n  text-align: center;\n  letter-spacing: 1.2px;\n"])));function Ae(){return Object(S.jsx)(_e,{children:Object(S.jsxs)("div",{children:["- React Blog Homework from Lidemy "," \u2665 "," -"]})})}var Je=p.a.div($e||($e=Object(l.a)(["\n  padding-top: 64px;\n"])));var Re=function(){var e=Object(j.useState)(null),n=Object(d.a)(e,2),t=n[0],c=n[1],i=Object(j.useState)(!0),r=Object(d.a)(i,2),a=r[0],o=r[1];return Object(j.useEffect)((function(){g()?y().then((function(e){e.ok&&(c(e.data),o(!1))})):o(!1)}),[]),Object(S.jsx)(w.Provider,{value:{user:t,setUser:c,isLoadingGetMe:a},children:Object(S.jsxs)(Je,{children:[Object(S.jsxs)(x.a,{children:[Object(S.jsx)(Te,{}),Object(S.jsxs)(h.c,{children:[Object(S.jsx)(h.a,{exact:!0,path:"/",children:Object(S.jsx)(te,{})}),Object(S.jsx)(h.a,{exact:!0,path:"/about",children:Object(S.jsx)(ve,{})}),Object(S.jsx)(h.a,{exact:!0,path:"/posts/:id",children:Object(S.jsx)(pe,{})}),Object(S.jsx)(h.a,{exact:!0,path:"/new-post",children:Object(S.jsx)(Be,{})}),Object(S.jsx)(h.a,{exact:!0,path:"/register",children:Object(S.jsx)(_,{})}),Object(S.jsx)(h.a,{exact:!0,path:"/login",children:Object(S.jsx)(N,{})})]})]}),Object(S.jsx)(Ae,{})]})})};b.a.render(Object(S.jsx)(Re,{}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e5dcbfcf.chunk.js.map